metadata:
  creationTimestamp: null
  labels:
    dogu: postfix
  name: postfix
  namespace: test
  ownerReferences:
    - apiVersion: k8s.cloudogu.com/v1
      blockOwnerDeletion: true
      controller: true
      kind: Dogu
      name: postfix
      uid: ""
spec:
  selector:
    matchLabels:
      dogu: postfix
  strategy:
    type: Recreate
  template:
    metadata:
      creationTimestamp: null
      labels:
        dogu: postfix
    spec:
      containers:
        - image: registry.cloudogu.com/official/postfix:2.4.48-4
          imagePullPolicy: IfNotPresent
          name: postfix
          Env:
            - name: POD_NAMESPACE
              value: ecosystem
            - name: POD_NAME
              valueFrom:
                fieldRef:
                  fieldPath: metadata.name
          resources: { }
          volumeMounts:
            - mountPath: /etc/ces/node_master
              name: node-master-file
              readOnly: true
              subPath: node_master
            - mountPath: /private
              name: postfix-private
              readOnly: true
          livenessProbe:
            failureThreshold: 3
            periodSeconds: 10
            successThreshold: 1
            tcpSocket:
              port: 389
            timeoutSeconds: 1
          startupProbe:
            exec:
              command:
                - bash
                - -c
                - '[[ $(doguctl state) == "ready" ]]'
            failureThreshold: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
      hostname: postfix
      imagePullSecrets:
        - name: k8s-dogu-operator-docker-registry
      securityContext:
        fsGroup: 101
        fsGroupChangePolicy: OnRootMismatch
      volumes:
        - configMap:
            name: node-master-file
          name: node-master-file
        - name: postfix-private
          secret:
            defaultMode: 484
            secretName: postfix-private
        - name: postfix-data
          persistentVolumeClaim:
            claimName: postfix
status: { }
