metadata:
  creationTimestamp: null
  labels:
    app: ces
    dogu.name: ldap
    dogu.version: 2.4.48-4
spec:
  InitContainers:
    - image: busybox:1.36
      name: dogu-volume-chown-init
      command: [ "sh", "-c", "mkdir -p /var/lib/openldap && chown -R 100:101 /var/lib/openldap && mkdir -p /etc/openldap/slapd.d && chown -R 100:101 /etc/openldap/slapd.d" ]
      volumeMounts:
        - name: ldap-data
          mountPath: "/var/lib/openldap"
          subPath: "db"
          readonly: false
        - name: ldap-data
          mountPath: "/etc/openldap/slapd.d"
          subPath: "config"
          readonly: false
  containers:
    - args:
        - while true; do sleep 5; done;
      command:
        - /bin/bash
        - -c
        - --
      env:
        - name: POD_NAMESPACE
          value: test
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: SUPPORT_MODE
          value: "true"
      image: registry.cloudogu.com/official/ldap:2.4.48-4
      imagePullPolicy: IfNotPresent
      name: ldap
      resources: { }
      volumeMounts:
        - mountPath: /etc/ces/node_master
          name: node-master-file
          readOnly: true
          subPath: node_master
        - mountPath: /private
          name: ldap-private
          readOnly: true
        - mountPath: /tmp/dogu-reserved
          name: ldap-reserved
          readOnly: false
        - mountPath: /var/lib/openldap
          name: ldap-data
          subPath: db
        - mountPath: /etc/openldap/slapd.d
          name: ldap-data
          subPath: config
  hostname: ldap
  imagePullSecrets:
    - name: k8s-dogu-operator-docker-registry
  volumes:
    - configMap:
        name: node-master-file
      name: node-master-file
    - name: ldap-private
      secret:
        defaultMode: 484
        secretName: ldap-private
    - name: ldap-reserved
      persistentVolumeClaim:
        claimName: ldap-reserved
    - name: ldap-data
      persistentVolumeClaim:
        claimName: ldap
